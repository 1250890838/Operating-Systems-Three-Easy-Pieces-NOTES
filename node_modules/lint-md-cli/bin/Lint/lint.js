"use strict";

var path = require('path');

var fs = require('fs');

var _require = require('lint-md'),
    lint = _require.lint,
    fix = _require.fix,
    version = _require.version;
/**
 * 使用 ast 和插件进行 lint
 * @param f
 * @param config
 * @returns {Promise<any>}
 */


module.exports = function (f, config) {
  var rules = config.rules;
  return new Promise(function (resolve, reject) {
    var file = path.resolve(f);
    var markdown = fs.readFileSync(file, {
      encoding: 'utf8'
    });
    var errors = lint(markdown, rules);
    resolve({
      path: path.dirname(file),
      file: path.basename(file),
      errors: errors // 去重

    });
  });
};